# Проект "widgetBack"

#### В данном проекте представлена backend-составляющая виджета личного кабинета клиентов
#### банка. Виджет показывает несколько последних успешных банковских операций клиента для
#### личного кабинета.

### Цель проекта:
#### подготовить на бэкенде данные для отображения в новом виджете.

## I. Описание
Проект реализован в виде базовой структуры модулями в директории **/src**, помимо
зависимостей проекта. Модули в **/src**:
- **masks.py**
- **widget.py**
- **processing.py**


### Модуль masks.py

Функция маскировки номера банковской карты **get_mask_card_number**. Функция принимает
на вход номер карты и возвращает ее маску в формате XXXX XX** **** XXXX, где X — это
цифра номера.

#### Пример работы функции:

```
7000792289602857     # входной аргумент
7000 79** **** 2857      # возврат функции
```

Функция маскировки номера банковского счета **get_mask_account**. Функция принимает на
вход номер счета и возвращает его маску в формате **XXXX, где X — это цифра номера.

#### Пример работы функции:

```
73654108430135875013      # входной аргумент
**5013     # возврат функции
```

### Модуль widget.py
Этот модуль содержит функции для работы с новыми возможностями приложения.

Функция **mask_account_card** умеет обрабатывать информацию как о картах, так и
о счетах: принимает один аргумент — строку, содержащую тип и номер карты или счета,
— возвращает строку с замаскированным номером. Для карт и счетов используются разные
типы маскировки.

#### Пример для карты
```
Visa Gold 7000792289602857  # входной аргумент
Visa Gold 7000 79** **** 2857  # выход функции
```

#### Пример для счета
```
Счет 73654108430135875013  # входной аргумент
Счет **5013  # выход функции
```

Функция **get_date** — принимает на вход строку с датой в формате
**"2024-05-11T04:22:16.671907"** и возвращает строку с датой в формате
**"ДД.ММ.ГГГГ" ("11.05.2024")**.


### Модуль processing.py

Данный модуль содержит функции для обработки новых типов данных.

Функция filter_by_state — принимает список словарей и опционально значение для ключа
**state** (по умолчанию — **'EXECUTED'**). Функция возвращает новый список словарей,
содержащий только те словари, у которых ключ **state** соответствует указанному значению.

### Пример работы функции:

#### Входные данные

```
[{'id': 41428829, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29.512364'},
{'id': 939719570, 'state': 'EXECUTED', 'date': '2018-06-30T02:08:58.425572'},
{'id': 594226727, 'state': 'CANCELED', 'date': '2018-09-12T21:27:25.241689'}]
```

#### Возврат функции со статусом по умолчанию 'EXECUTED'

```
[{'id': 41428829, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29.512364'},
{'id': 939719570, 'state': 'EXECUTED', 'date': '2018-06-30T02:08:58.425572'}]
```

Функция **sort_by_date**. Принимает список словарей и необязательный параметр,
задающий порядок сортировки (по умолчанию — убывание). Функция возвращает новый
список, отсортированный по дате.

### Пример работы функции:

#### Входные данные
```
[{'id': 41428829, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29.512364'},
{'id': 594226727, 'state': 'CANCELED', 'date': '2018-09-12T21:27:25.241689'},
{'id': 615064591, 'state': 'CANCELED', 'date': '2018-10-14T08:21:33.419441'}]
```

#### Возврат функции (сортировка по убыванию)
```
[{'id': 41428829, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29.512364'},
{'id': 615064591, 'state': 'CANCELED', 'date': '2018-10-14T08:21:33.419441'},
{'id': 594226727, 'state': 'CANCELED', 'date': '2018-09-12T21:27:25.241689'}]
```

## II. Установка пакета

#### *1. Клонируйте репозиторий:*

```
git clone https://github.com/username/myblog.git
```

#### *2. Установите Poetry (рекомендуется):*

- Зайдите на сайт https://python-poetry.org/ и перейдите в раздел Documentation
—> Introduction —> Installation.


- Здесь вы найдете команды для установки Poetry (в данном примере указаны для Ubuntu).
Выполните в терминале:
```
sudo curl -sSL https://install.python-poetry.org/ | python3 -
```
- Запустится установка Poetry.
Более подробно про установку Poetry см. на
[сайте](https://python-poetry.org/docs/#installing-with-the-official-installer) проекта.


#### *3. Установите зависимости:*

```
poetry install
```

Эта команда автоматически установит все зависимости, которые перечислены в разделе
**[tool.poetry.dependencies]** и в любых других определенных группах зависимостей
в файле **pyproject.toml**.


## III. Примеры использования модулей.

Чтобы использовать функции из модуля в другом скрипте или в интерпретаторе, его
нужно импортировать. Python ищет модули в определенных местах: в текущей директории,
в стандартных путях установки и в путях, указанных в переменной окружения PYTHONPATH.

#### *Способ 1: Импорт всего модуля:*

```
import masks

result = masks.get_mask_card_number(7000792289602857)
print(result)  # Выведет: 7000 79** **** 2857

card_mask = masks.get_mask_account(73654108430135875013)
print(card_mask)    # Выведет: **5013
```

#### *Способ 2: Импорт конкретных функций (рекомендуется):*

```
from masks import get_mask_card_number, get_mask_account

result = get_mask_account(73654108430135875013)  # Теперь можно вызывать напрямую
print(result)  # Выведет: **5013
```


### ВНИМАНИЕ:
**!!! Нельзя менять базовую структуру директории /src !!!** Это нарушит работу модулей,
а значит и проекта в целом! По мере развития проекта базовая структура может быть
расширена дополнительными модулями.


## IV. Лицензия

Проект распространяется под [лицензией MIT](LICENSE).